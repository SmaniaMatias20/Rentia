<!-- Overlay -->
<div class="fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50">

    <!-- Modal -->
    <div class="bg-gray-900 text-white w-full max-w-lg rounded-xl shadow-xl p-6 animate-fadeIn">

        <!-- Header -->
        <h2 class="text-lg font-semibold mb-5">
            Registrar Pago
        </h2>

        <!-- Form -->
        <div class="grid grid-cols-1 gap-4">

            <!-- Total alquiler y resto -->
            <div class="grid grid-cols-2 gap-4 mt-4">

                <!-- Total -->
                <div class="rounded-2xl bg-gradient-to-br from-green-900/60 to-green-800/40 
              border border-green-700/40 p-5 shadow-lg">

                    <p class="text-xs uppercase tracking-wider text-green-300 mb-2">
                        Total alquiler
                    </p>

                    <p class="text-2xl font-bold text-white">
                        $ {{ total_rent_amount | number:'1.0-0' }}
                    </p>
                </div>

                <!-- Resto -->
                <div class="rounded-2xl bg-gradient-to-br from-red-900/60 to-red-800/40 
              border border-red-700/40 p-5 shadow-lg">

                    <p class="text-xs uppercase tracking-wider text-red-300 mb-2">
                        Resto
                    </p>

                    <p class="text-2xl font-bold text-white">
                        $ {{ (total_rent_amount - rent_amount) | number:'1.0-0' }}
                    </p>

                    <!-- Barra dinámica -->
                    <div class="w-full h-2 bg-gray-700 rounded-full mt-4 overflow-hidden">
                        <div class="h-2 bg-red-400 transition-all duration-500 ease-out" [style.width.%]="
             total_rent_amount > 0
               ? ((total_rent_amount - rent_amount) / total_rent_amount) * 100
               : 0
           ">
                        </div>
                    </div>

                </div>

            </div>

            <!-- Monto -->
            <div>
                <label class="text-sm text-gray-400 mb-1 block">Monto</label>
                <input type="number" [(ngModel)]="amount" min="1" [max]="remainingAmount" class="w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-sm 
         focus:outline-none focus:ring-2 focus:ring-blue-500">

                <p *ngIf="amount > remainingAmount" class="text-xs text-red-400 mt-1">
                    El importe no puede superar $ {{ remainingAmount | number:'1.0-0' }}
                </p>
            </div>

            <!-- Método -->
            <div>
                <label class="text-sm text-gray-400 mb-1 block">Método de pago</label>
                <select [(ngModel)]="payment_method"
                    class="w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="">Seleccionar...</option>
                    <option value="cash">Efectivo</option>
                    <option value="transfer">Transferencia</option>
                    <option value="card">Tarjeta</option>
                    <option value="mixed">Mas de un método</option>
                </select>
            </div>



        </div>

        <!-- Actions -->
        <div class="flex justify-end gap-3 mt-6">
            <button (click)="close()"
                class="px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 transition cursor-pointer">
                Cancelar
            </button>

            <button (click)="savePayment()" [disabled]="amount <= 0 || amount > remainingAmount" class="px-4 py-2 rounded-lg bg-blue-600 
         hover:bg-blue-500 transition font-medium 
         disabled:opacity-40 disabled:cursor-not-allowed">
                Guardar Pago
            </button>
        </div>

    </div>
</div>