<div class="max-w-screen bg-black px-4 relative min-h-screen">

  @if (loading) {
  <div class="fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-50">
    <app-spinner></app-spinner>
  </div>
  }

  @if (!loading) {
  <div class="absolute top-4 right-4 z-20
  flex flex-col gap-2
  sm:flex-row sm:gap-3">
    <!-- Nueva propiedad -->
    <button class="
      flex items-center justify-center gap-1
      py-2 px-4
      w-full sm:w-auto text-white font-semibold
      rounded-lg bg-green-600 hover:bg-green-700
      disabled:bg-green-400 disabled:cursor-not-allowed cursor-pointer
      " (click)="openFormPayment()">
      <span class="material-icons">add</span>
      Nuevo pago
    </button>

    <!-- Volver al menú -->
    <button class="
      flex items-center justify-center gap-1
      py-2 px-4
      w-full sm:w-auto
      rounded-lg bg-blue-600 hover:bg-blue-700
      disabled:bg-blue-400 disabled:cursor-not-allowed
      text-white font-semibold transition cursor-pointer
      " (click)="goToHome()">
      <span class="material-icons">arrow_back</span>
      Volver al menú
    </button>
  </div>

  <div class="max-w-md mt-6 border border-gray-700 rounded-lg shadow-lg overflow-hidden">
    <select
      class="w-full bg-gray-900 border border-gray-700 text-white rounded-lg px-3 py-2 focus:outline-none focus:ring focus:ring-blue-500"
      [(ngModel)]="selectedContract" (ngModelChange)="onContractSelected($event)">
      <option [ngValue]="null">Seleccionar contrato...</option>

      @for (contract of contracts; track contract.id) {
      <option [ngValue]="contract">
        {{ contract.property_name }} - {{ contract.tenant_name }}
      </option>
      }
    </select>

  </div>

  @if (selectedContract) {
  <app-card-payment [months]="months"></app-card-payment>
  }

  }
</div>