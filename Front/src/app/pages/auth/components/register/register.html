<div class="w-full max-w-md mx-auto border-2 border-gray-600 rounded-xl p-8 shadow-lg">

    <h2 class="text-2xl font-bold text-center text-gray-800 dark:text-gray-100 mb-6">
        Crear cuenta
    </h2>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-5">

        <!-- Usuario -->
        <div>
            <input type="text" formControlName="username" placeholder="Usuario" class="w-full px-4 py-2 rounded-lg border
               border-gray-300 dark:border-gray-700
               bg-white dark:bg-gray-800
               text-gray-800 dark:text-gray-100
               focus:outline-none focus:ring-2 focus:ring-blue-500" />

            <div class="min-h-[1.25rem]">
                @if (registerForm.get('username')?.touched && registerForm.get('username')?.invalid) {
                <p class="text-sm text-red-500 mt-1">
                    El usuario es obligatorio
                </p>
                }
            </div>
        </div>

        <!-- Email -->
        <div>
            <input type="email" formControlName="email" placeholder="Correo electrónico" class="w-full px-4 py-2 rounded-lg border
               border-gray-300 dark:border-gray-700
               bg-white dark:bg-gray-800
               text-gray-800 dark:text-gray-100
               focus:outline-none focus:ring-2 focus:ring-blue-500" />

            <div class="min-h-[1.25rem]">
                @if (registerForm.get('email')?.touched && registerForm.get('email')?.invalid) {
                <p class="text-sm text-red-500 mt-1">
                    Ingresá un email válido
                </p>
                }
            </div>
        </div>

        <!-- Rol (Owner/Tenant) -->
        <!-- <div class="relative">
            <select formControlName="role" class="w-full px-4 py-2 pr-12 rounded-lg border
               border-gray-300 dark:border-gray-700
               bg-white dark:bg-gray-800
               text-gray-800 dark:text-gray-100
               focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="owner">Propietario</option>
                <option value="tenant">Inquilino</option>
            </select>

            <div class="min-h-[1.25rem]">
                @if (registerForm.get('role')?.touched && registerForm.get('role')?.invalid) {
                <p class="text-sm text-red-500 mt-1">
                    Selecciona un rol
                </p>
                }
            </div>
        </div> -->

        <!-- Contraseña -->
        <div class="relative">
            <input [type]="showPassword ? 'text' : 'password'" formControlName="password" placeholder="Contraseña"
                class="w-full px-4 py-2 pr-12 rounded-lg border
               border-gray-300 dark:border-gray-700
               bg-white dark:bg-gray-800
               text-gray-800 dark:text-gray-100
               focus:outline-none focus:ring-2 focus:ring-blue-500" />

            <button type="button" (click)="togglePassword()" class="absolute right-3 top-6 -translate-y-1/2
               text-gray-500 hover:text-gray-300 focus:outline-none">

                <span class="material-icons">
                    {{ showPassword ? 'visibility_off' : 'visibility' }}
                </span>
            </button>

            <div class="min-h-[1.25rem]">
                @if (registerForm.get('password')?.touched && registerForm.get('password')?.invalid) {
                <p class="text-sm text-red-500 mt-1">
                    La contraseña es obligatoria
                </p>
                }
            </div>
        </div>


        <!-- Confirmación -->
        <div class="relative">
            <input [type]="showConfirmPassword ? 'text' : 'password'" formControlName="confirmPassword"
                placeholder="Confirmar contraseña" class="w-full px-4 py-2 pr-12 rounded-lg border
               border-gray-300 dark:border-gray-700
               bg-white dark:bg-gray-800
               text-gray-800 dark:text-gray-100
               focus:outline-none focus:ring-2 focus:ring-blue-500" />

            <button type="button" (click)="toggleConfirmPassword()" class="absolute right-3 top-6 -translate-y-1/2
               text-gray-500 hover:text-gray-300 focus:outline-none">

                <span class="material-icons">
                    {{ showConfirmPassword ? 'visibility_off' : 'visibility' }}
                </span>
            </button>

            <div class="min-h-[1.25rem]">
                @if (registerForm.errors?.['passwordMismatch'] && registerForm.get('confirmPassword')?.touched) {
                <p class="text-sm text-red-500 mt-1">
                    Las contraseñas no coinciden
                </p>
                }
            </div>
        </div>


        <!-- Botón -->
        <button type="submit" [disabled]="registerForm.invalid" class="w-full py-2 rounded-lg bg-green-600 hover:bg-green-700
             disabled:bg-green-400 disabled:cursor-not-allowed
             text-white font-semibold transition cursor-pointer">
            Registrarse
        </button>

    </form>

    <app-toast #toast></app-toast>

</div>