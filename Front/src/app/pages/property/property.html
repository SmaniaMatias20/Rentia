<div class="mt-10 w-full px-4 lg:px-12">

    <div class="flex items-center justify-end gap-2 mb-4">
        <!-- Volver al menú -->
        <button class="
        flex items-center gap-1
        py-2 px-4
        rounded-lg bg-blue-600 hover:bg-blue-700
        disabled:bg-blue-400 disabled:cursor-not-allowed
        text-white font-semibold transition
      " (click)="goToProperties()">
            <span class="material-icons">arrow_back</span>
            Volver al menú
        </button>
    </div>

    @if (loading) {
    <div class="fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-50">
        <app-spinner></app-spinner>
    </div>
    }

    @if (propertyData != null && !loading) {
    <div
        class="flex flex-col w-full bg-black backdrop-blur border border-white/50 text-white rounded-2xl shadow-xl overflow-hidden">

        <!-- TOP: Imagen + Info -->
        <div class="flex flex-col lg:flex-row">
            <!-- Información -->
            <div class="flex-1 p-8 flex flex-col justify-between">

                <!-- Header -->
                <div>
                    <h2 class="text-3xl font-bold flex items-center gap-2 mb-2">
                        <span class="material-icons text-blue-400 text-3xl">home</span>
                        {{ propertyData.name }}
                    </h2>
                    <p class="text-base text-gray-400 flex items-center gap-1">
                        <span class="material-icons text-base">place</span>
                        {{ propertyData.address }}
                    </p>
                </div>

                <!-- Datos -->
                <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 mt-6">

                    <div class="flex items-center gap-3">
                        <span class="material-icons text-green-400 text-3xl">attach_money</span>
                        <div>
                            <p class="text-gray-400 text-sm">Valor del alquiler</p>
                            <p class="text-lg font-semibold">${{ propertyData.value }}</p>
                        </div>
                    </div>

                    <div class="flex items-center gap-3">
                        <span class="material-icons text-yellow-400 text-3xl">payments</span>
                        <div>
                            <p class="text-gray-400 text-sm">Extras</p>
                            <p class="text-lg font-semibold">${{ propertyData.additional_costs }}</p>
                        </div>
                    </div>

                    <div class="flex items-center gap-3">
                        <span class="material-icons text-purple-400 text-3xl">calendar_today</span>
                        <div>
                            <p class="text-gray-400 text-sm">Creada</p>
                            <p class="text-lg font-semibold">
                                {{ propertyData.created_at | date:'shortDate' }}
                            </p>
                        </div>
                    </div>

                    <div class="flex items-center gap-3">
                        <span class="material-icons text-cyan-400 text-3xl">person</span>
                        <div>
                            <p class="text-gray-400 text-sm">Inquilino</p>
                            <p class="text-lg font-semibold">
                                {{ propertyData.tenant_id ? 'Asignado' : 'Ninguno' }}
                            </p>
                        </div>
                    </div>

                </div>

                <!-- Badges -->
                <div class="flex gap-4 mt-8">
                    <span class="px-5 py-2 rounded-full text-sm font-semibold"
                        [ngClass]="propertyData.tenant_id ? 'bg-green-600' : 'bg-red-600'">
                        {{ propertyData.tenant_id ? 'Alquilada' : 'Disponible' }}
                    </span>

                    <span class="px-5 py-2 rounded-full text-sm font-semibold"
                        [ngClass]="propertyData.is_enabled ? 'bg-green-600' : 'bg-red-600'">
                        {{ propertyData.is_enabled ? 'Activa' : 'Inactiva' }}
                    </span>
                </div>

            </div>
        </div>

        <!-- MAPA FULL WIDTH (solo visual) -->
        <div class="w-full h-[350px] border-t border-white/50">
            <!-- Mapa ocupa el 90% del viewport height -->
            <div id="map" class="w-full h-[70vh] shadow-lg overflow-hidden"></div>
        </div>


    </div>
    }
</div>